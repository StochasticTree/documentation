"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[7511],{6858:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"r-documentation-markdown/getRandomEffectSamples.bcf","title":"getRandomEffectSamples.bcf","description":"Description","source":"@site/docs/r-documentation-markdown/getRandomEffectSamples.bcf.md","sourceDirName":"r-documentation-markdown","slug":"/r-documentation-markdown/getRandomEffectSamples.bcf","permalink":"/documentation/docs/r-documentation-markdown/getRandomEffectSamples.bcf","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/r-documentation-markdown/getRandomEffectSamples.bcf.md","tags":[],"version":"current","frontMatter":{"title":"getRandomEffectSamples.bcf"},"sidebar":"tutorialSidebar","previous":{"title":"getRandomEffectSamples.bartmodel","permalink":"/documentation/docs/r-documentation-markdown/getRandomEffectSamples.bartmodel"},"next":{"title":"getRandomEffectSamples","permalink":"/documentation/docs/r-documentation-markdown/getRandomEffectSamples"}}');var r=t(4848),a=t(8453);const i={title:"getRandomEffectSamples.bcf"},o="Extract raw sample values for each of the random effect parameter terms.",c={},d=[{value:"Description",id:"description",level:2},{value:"Usage",id:"usage",level:2},{value:"Arguments",id:"arguments",level:2},{value:"Value",id:"value",level:2},{value:"Examples",id:"examples",level:2}];function m(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"extract-raw-sample-values-for-each-of-the-random-effect-parameter-terms",children:"Extract raw sample values for each of the random effect parameter terms."})}),"\n",(0,r.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,r.jsx)(n.p,{children:"Extract raw sample values for each of the random effect parameter terms."}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-r",children:"# S3 method for bcf\ngetRandomEffectSamples(object, ...)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"arguments",children:"Arguments"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"object"}),": Object of type ",(0,r.jsx)(n.code,{children:"bcf"})," containing draws of a Bayesian causal forest model and associated sampling outputs."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"..."}),": Other parameters to be used in random effects extraction"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"value",children:"Value"}),"\n",(0,r.jsxs)(n.p,{children:["List of arrays. The alpha array has dimension (",(0,r.jsx)(n.code,{children:"num_components"}),", ",(0,r.jsx)(n.code,{children:"num_samples"}),") and is simply a vector if ",(0,r.jsx)(n.code,{children:"num_components = 1"}),".\nThe xi and beta arrays have dimension (",(0,r.jsx)(n.code,{children:"num_components"}),", ",(0,r.jsx)(n.code,{children:"num_groups"}),", ",(0,r.jsx)(n.code,{children:"num_samples"}),") and is simply a matrix if ",(0,r.jsx)(n.code,{children:"num_components = 1"}),".\nThe sigma array has dimension (",(0,r.jsx)(n.code,{children:"num_components"}),", ",(0,r.jsx)(n.code,{children:"num_samples"}),") and is simply a vector if ",(0,r.jsx)(n.code,{children:"num_components = 1"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-r",children:"n \\<- 500\nx1 \\<- rnorm(n)\nx2 \\<- rnorm(n)\nx3 \\<- rnorm(n)\nx4 \\<- as.numeric(rbinom(n,1,0.5))\nx5 \\<- as.numeric(sample(1:3,n,replace=TRUE))\nX \\<- cbind(x1,x2,x3,x4,x5)\np \\<- ncol(X)\ng \\<- function(x) \\{ifelse(x[,5]==1,2,ifelse(x[,5]==2,-1,4))\\}\nmu1 \\<- function(x) \\{1+g(x)+x[,1]*x[,3]\\}\nmu2 \\<- function(x) \\{1+g(x)+6*abs(x[,3]-1)\\}\ntau1 \\<- function(x) \\{rep(3,nrow(x))\\}\ntau2 \\<- function(x) \\{1+2*x[,2]*x[,4]\\}\nmu_x \\<- mu1(X)\ntau_x \\<- tau2(X)\npi_x \\<- 0.8*pnorm((3*mu_x/sd(mu_x)) - 0.5*X[,1]) + 0.05 + runif(n)/10\nZ \\<- rbinom(n,1,pi_x)\nE_XZ \\<- mu_x + Z*tau_x\nsnr \\<- 3\ngroup_ids \\<- rep(c(1,2), n %/% 2)\nrfx_coefs \\<- matrix(c(-1, -1, 1, 1), nrow=2, byrow=TRUE)\nrfx_basis \\<- cbind(1, runif(n, -1, 1))\nrfx_term \\<- rowSums(rfx_coefs[group_ids,] * rfx_basis)\ny \\<- E_XZ + rfx_term + rnorm(n, 0, 1)*(sd(E_XZ)/snr)\nX \\<- as.data.frame(X)\nX$x4 \\<- factor(X$x4, ordered = TRUE)\nX$x5 \\<- factor(X$x5, ordered = TRUE)\ntest_set_pct \\<- 0.2\nn_test \\<- round(test_set_pct*n)\nn_train \\<- n - n_test\ntest_inds \\<- sort(sample(1:n, n_test, replace = FALSE))\ntrain_inds \\<- (1:n)[!((1:n) %in% test_inds)]\nX_test \\<- X[test_inds,]\nX_train \\<- X[train_inds,]\npi_test \\<- pi_x[test_inds]\npi_train \\<- pi_x[train_inds]\nZ_test \\<- Z[test_inds]\nZ_train \\<- Z[train_inds]\ny_test \\<- y[test_inds]\ny_train \\<- y[train_inds]\nmu_test \\<- mu_x[test_inds]\nmu_train \\<- mu_x[train_inds]\ntau_test \\<- tau_x[test_inds]\ntau_train \\<- tau_x[train_inds]\ngroup_ids_test \\<- group_ids[test_inds]\ngroup_ids_train \\<- group_ids[train_inds]\nrfx_basis_test \\<- rfx_basis[test_inds,]\nrfx_basis_train \\<- rfx_basis[train_inds,]\nrfx_term_test \\<- rfx_term[test_inds]\nrfx_term_train \\<- rfx_term[train_inds]\nbcf_model \\<- bcf(X_train = X_train, Z_train = Z_train, y_train = y_train, \n```r\n             pi_train = pi_train, group_ids_train = group_ids_train, \n             rfx_basis_train = rfx_basis_train, X_test = X_test, \n             Z_test = Z_test, pi_test = pi_test, group_ids_test = group_ids_test,\n             rfx_basis_test = rfx_basis_test, \n             num_gfr = 100, num_burnin = 0, num_mcmc = 100, \n             sample_sigma_leaf_mu = TRUE, sample_sigma_leaf_tau = FALSE)\n"})}),"\n",(0,r.jsx)(n.p,{children:"rfx_samples <- getRandomEffectSamples(bcf_model)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{})})]})}function l(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var s=t(6540);const r={},a=s.createContext(r);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);